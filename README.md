# 💬 ChatViz

LINEのトーク履歴を分析・可視化するWebアプリケーションです。

🌐 **デプロイ版**: https://line-talk-viewer-qy6nsvlg2nwdgfutymga6j.streamlit.app/

📂 **GitHub**: https://github.com/ryouyuu/line-talk-viewer

## 🌟 主な機能

### 📊 基本機能
- **会話表示** - LINE風のUIでメッセージを表示
- **参加者自動特定** - ファイルの1行目から参加者を自動検出
- **検索・フィルタ** - 日付、発言者、キーワードで検索
- **基本統計** - メッセージ数、参加者数などの統計

### 📈 分析機能
- **感情分析** - メッセージの感情を分析（ポジティブ/ネガティブ/ニュートラル）
- **頻出ワード分析** - よく使われる単語を可視化
- **返信速度分析** - メッセージ送信速度を分析
- **高度な会話分析** - 時間帯、メッセージ長、絵文字使用率など

### 📱 モバイル対応
- **レスポンシブデザイン** - スマートフォン・タブレット対応
- **タッチフレンドリー** - 直感的な操作
- **最適化されたUI** - モバイル画面に最適化

## 🚀 使用方法

### 1. ファイルアップロード
1. LINEでバックアップを取得
   - LINEアプリ → 設定 → トーク → トーク履歴を送信
   - テキストファイル（.txt）が生成されます

2. ファイルをアップロード
   - アプリケーションのファイルアップロード機能を使用

### 2. 参加者選択
- **自動検出**: ファイルの1行目の参加者が参考情報として表示されます
- **手動選択**: 参加者リストから自分の名前を選択
- **即座反映**: 選択後すぐにメインコンテンツが表示されます

### 3. 会話確認・分析
- **会話表示**: スマホ風UIで会話を表示
- **検索機能**: 特定の話題を検索
- **分析機能**: 感情分析や頻出ワードで会話を分析

## 🔧 ローカル実行

### 必要な環境
- Python 3.8以上
- pip

### インストール手順

```bash
# リポジトリをクローン
git clone https://github.com/ryouyuu/line-talk-viewer.git
cd ltv

# 依存関係のインストール
pip install -r requirements.txt

# アプリケーション起動
streamlit run main.py
```

### 依存関係
```bash
# 軽量版（基本機能のみ）
pip install -r requirements-light.txt

# 完全版（感情分析含む）
pip install -r requirements.txt

# Streamlit版
pip install -r requirements-streamlit.txt
```

## 📁 対応ファイル形式

### 形式1: `[YYYY/MM/DD HH:MM] Sender: Message`
```
[2024/01/15 14:30] 佐藤: こんにちは！
[2024/01/15 14:31] 田中: こんにちは！
```

### 形式2: `HH:MM\tSender\tMessage` + 日付行
```
2024/01/15(月)
14:30	佐藤	こんにちは！
14:31	田中	こんにちは！
```

## 🎯 使用技術

- **Streamlit** - Webアプリケーションフレームワーク
- **Pandas** - データ処理・分析
- **Plotly** - データ可視化
- **Transformers** - 感情分析（BERT）
- **Janome** - 日本語形態素解析
- **Regex** - テキストパターンマッチング

## 📱 モバイル対応の詳細

### レスポンシブデザイン
- **画面サイズ自動調整** - デスクトップ・タブレット・スマートフォン対応
- **タブレイアウト最適化** - モバイルでは3タブ、デスクトップでは5タブ
- **フォントサイズ調整** - デバイスに応じた最適なサイズ

### タッチ最適化
- **タップしやすいボタン** - 十分なサイズと間隔
- **スワイプ対応** - タブ切り替えがスムーズ
- **ズーム防止** - iOSでの意図しないズームを防止

### パフォーマンス最適化
- **軽量設計** - 高速読み込み
- **効率的なデータ処理** - 大量メッセージでも快適動作
- **メモリ最適化** - リソース使用量を最小限に抑制

## 🔒 プライバシー・セキュリティ

### データ保護
- **一時保存のみ** - アップロードされたファイルは一時的にのみ保存
- **ローカル処理** - 分析結果はブラウザ内でのみ処理
- **外部送信なし** - データを外部サーバーに送信しません

### セッション管理
- **状態管理** - Streamlitセッション状態で安全に管理
- **自動クリーンアップ** - 不要なデータは自動削除
- **無限ループ防止** - 適切な状態管理で安定動作

## 🚀 デプロイ方法

### Streamlit Cloud（推奨）

1. **GitHubにアップロード**
   ```bash
   git add .
   git commit -m "Initial commit"
   git remote add origin https://github.com/yourusername/chatviz.git
   git push -u origin main
   ```

2. **Streamlit Cloudでデプロイ**
   - [Streamlit Cloud](https://share.streamlit.io/) にアクセス
   - GitHubアカウントでログイン
   - リポジトリを選択
   - デプロイ

### その他のプラットフォーム

#### Railway
- 月500時間まで無料
- 簡単なデプロイ
- 自動スケーリング

#### Render
- 月750時間まで無料
- 自動デプロイ対応
- カスタムドメイン対応

#### Heroku
- 有料プランのみ（無料プラン終了）
- 本格的な運用に適している

## 📋 プロジェクト構造

```
ltv/
├── main.py                    # メインアプリケーション
├── parser.py                  # LINEファイル解析・参加者自動特定
├── analyzer.py                # 分析機能（感情・頻出ワード・返信速度）
├── utils.py                   # UI・ユーティリティ・可視化
├── requirements.txt           # 完全版依存関係
├── requirements-light.txt     # 軽量版依存関係
├── requirements-streamlit.txt # Streamlit版依存関係
├── packages.txt              # システム依存関係
├── README.md                 # このファイル
└── .gitignore               # Git除外設定
```

## 🐛 トラブルシューティング

### よくある問題

1. **ファイルが読み込めない**
   - ファイル形式を確認してください
   - エンコーディングがUTF-8またはShift_JISであることを確認

2. **参加者が表示されない**
   - ファイルの1行目が正しい形式であることを確認
   - 参加者名に特殊文字が含まれていないか確認

3. **分析が遅い**
   - 大量のメッセージがある場合は処理に時間がかかります
   - 感情分析は初回実行時にモデルをダウンロードします

### パフォーマンス改善

- **軽量版を使用** - 感情分析が不要な場合は`requirements-light.txt`を使用
- **ファイルサイズ制限** - 非常に大きなファイルは分割して処理
- **ブラウザ更新** - 問題が発生した場合はブラウザを更新

## 📄 ライセンス

MIT License

## 🤝 貢献

プルリクエストやイシューの報告を歓迎します！

### 開発に参加するには

1. リポジトリをフォーク
2. 機能ブランチを作成
3. 変更をコミット
4. プルリクエストを作成

### 報告すべき内容

- バグ報告
- 機能要望
- パフォーマンス改善提案
- ドキュメント改善

---

**注意**: このアプリケーションは個人利用を目的としています。商用利用の際は適切なライセンス確認をお願いします。

---

**ChatViz** - LINEトーク履歴の分析・可視化ツール

*最新更新: 2024年1月* 