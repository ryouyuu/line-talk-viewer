
# LINEトーク履歴ビジュアライザー – 開発仕様書（Cursor用）

## ✅ プロジェクト概要（タイトル）
**LINEトーク履歴ビジュアライザー – Webで見やすくまとめて表示・分析できるアプリ**

---

## 🎯 目的（狙い）

- LINEでバックアップ保存した `.txt` トーク履歴ファイルをアップロードすると、  
  会話を **スマホ風UIで見やすく表示** ＋ **検索・分析できる**ようにする。
- Webブラウザ上で動作し、**非エンジニアでも簡単に使える**UIを目指す。
- 自分とゆいなちゃんとの会話を読み返しやすくし、関係性の記録・分析ができる。

---

## 💡 想定ユーザー

- 自分（開発者）
- 恋人との会話を記録したい人
- LINEのテキスト履歴を視覚的に読みやすくしたい人

---

## 🧩 機能要件（詳細）

### 1. 📥 テキストファイルのアップロード
- ファイル形式: LINEバックアップ `.txt`（日本語、Shift_JIS or UTF-8）
- 例: `[LINE] ゆいなとのトーク.txt`

---

### 2. 📱 スマホ風UIで会話表示
- 吹き出し表示（LINE風）：
  - 自分（ゆうき）: 右寄せ + 緑系バブル
  - 相手（ゆいな）: 左寄せ + 白背景バブル
- メッセージの並び：日付順・時系列順（00:00〜23:59）
- 日付ごとに区切ってセクションを表示
- [スタンプ] や [写真] などの記号も文字で表示

---

### 3. 🔍 キーワード検索機能
- 上部に検索欄
- 入力された語句を含むメッセージをすべて抽出・ハイライト表示
- 該当する日付とメッセージを一覧で表示

---

### 4. 😊 感情分析（ポジティブ／ネガティブ）
- 日本語感情分析モデルを使って各メッセージの感情を推定
  - 推奨モデル：`daigo/bert-base-japanese-sentiment`（HuggingFace）
- 日ごとの集計結果を棒グラフや円グラフで可視化
- 会話がどの日にポジティブだったか、ネガティブだったかの傾向を知る

---

### 5. 🧠 頻出ワード分析
- 会話の中でよく使われる単語を形態素解析で抽出（名詞のみ）
- WordCloud（ワードクラウド）で可視化
  - 日本語フォント指定必須（`ipaexg.ttf`など）

---

### 6. 📝 トピック要約（オプション）
- 各日付の会話を GPT API に送って簡潔に要約
- 「この日の主な話題」を1〜2文で表示
- 会話量が多い日は自動要約が特に有効

---

### 7. 📊 会話メトリクス表示（任意）
- 総メッセージ数・日数・既読率・発言比率（自分 vs 相手）
- 会話の活発な日ランキング

---

## 🖥️ UI仕様イメージ（Streamlitベース）

```
+-----------------------------------------------------+
| 📥 ファイルアップロード（.txt）                    |
+-----------------------------------------------------+
| 🔍 検索欄：「オムライス」                         |
+-----------------------------------------------------+
| 📆 2025/07/02（感情: 😊8件 😢2件）                |
| [ゆいな] 12:34 おはよ〜！                         |
|       └ 白背景左寄せの吹き出し                   |
| [ゆうき] 12:35 おはようー！今日は晴れてるね！      |
|       └ 緑背景右寄せの吹き出し                   |
+-----------------------------------------------------+
| 📈 棒グラフ：ポジ/ネガ件数                         |
| ☁️ WordCloud: 頻出ワード                         |
| 🧠 トピック要約（GPT）                            |
+-----------------------------------------------------+
```

---

## 📁 推奨ファイル構成

```
line_talk_viewer/
├── main.py                # Streamlitアプリ（UI統括）
├── parser.py              # トークファイル読み込み＆構造化
├── analyzer.py            # 感情分析・頻出語抽出
├── utils.py               # UIコンポーネント（吹き出し等）
├── data/
│   └── sample_line.txt    # テスト用データ
├── assets/
│   └── font/ipaexg.ttf    # 日本語フォント（WordCloud用）
├── requirements.txt       # ライブラリ定義
```

---

## 🧪 使用ライブラリ候補

- `streamlit`
- `transformers`
- `torch`
- `fugashi`, `ipadic`（日本語分かち書き）
- `janome`（名詞抽出）
- `wordcloud`
- `matplotlib`
- `pandas`
- `openai`（任意）

---

## 🧠 Cursorで実装する順序（推奨）

1. `parser.py`: トークを日付＋時系列の構造にパース
2. `main.py`: Streamlit UIベース表示（スマホ風）
3. 検索機能 → 感情分析 → WordCloud の順で追加
4. GPT要約や日別統計は拡張で追加可能

---

## ✅ 最後に

このアプリは「1人の恋人との思い出会話を、視覚的に残しながら分析する」というコンセプト。  
エモーショナルなUXを大事にしたいので、**UIはやさしく、色味もLINE風で統一**してあげるとより良いです。
